import{u as g,j as e,B as l,F as a,S as c,T as x,C as p,L as u,a as j,g as h,b as m,c as f,r as w,d as L,H as b,e as y,f as C}from"./index-QiQVuLYY.js";const v=({taskInstance:s,wrap:i})=>{const{data:r,error:o,isLoading:t}=g({dagId:s.dag_id,logLevelFilters:["error","critical"],taskInstance:s,tryNumber:s.try_number},{refetchInterval:!1,retry:!1});return e.jsxs(l,{borderRadius:4,borderStyle:"solid",borderWidth:1,width:"100%",children:[e.jsxs(a,{alignItems:"center",justifyContent:"space-between",px:2,children:[e.jsxs(l,{children:[e.jsx(c,{mr:1,state:s.state}),s.task_display_name,e.jsx(x,{datetime:s.run_after,ml:1})]}),e.jsxs(a,{gap:1,children:[e.jsx(p,{taskInstance:s,withText:!1}),e.jsx(u,{asChild:!0,color:"fg.info",fontSize:"sm",children:e.jsx(j,{to:h(s),children:"View full logs"})})]})]}),e.jsx(l,{maxHeight:"100px",overflow:"auto",children:e.jsx(m,{error:o,isLoading:t,logError:o,parsedLogs:r.parsedLogs??[],wrap:i})})]},s.id)},B=({failedTasks:s})=>{const i=!!f("default_wrap"),[r,o]=w.useState(i),t=s==null?void 0:s.task_instances.slice(0,5),n=()=>o(!r);if(L("w",n),!(t===void 0||t.length<=0))return e.jsxs(a,{flexDirection:"column",gap:3,children:[e.jsxs(a,{alignItems:"center",justifyContent:"space-between",children:[e.jsx(b,{size:"md",children:"Recent Failed Task Logs"}),e.jsx(y,{closeDelay:100,content:"Press w to toggle wrap",openDelay:100,children:e.jsx(C,{"aria-label":r?"Unwrap":"Wrap",bg:"bg.panel",fontSize:"sm",onClick:n,size:"sm",variant:"outline",children:r?"Unwrap":"Wrap"})})]}),t.map(d=>e.jsx(v,{taskInstance:d,wrap:r},d.id))]})};export{B as default};
